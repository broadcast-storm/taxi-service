(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32d0272c"],{1270:function(e,t,n){"use strict";n("b0c0");var r=n("7a23");function o(e,t,n,o,a,l){return Object(r["p"])(),Object(r["d"])("div",null,[Object(r["g"])("label",{for:n.name,class:"sr-only"},Object(r["y"])(n.name),9,["for"]),Object(r["g"])("input",{id:n.name,name:n.name,type:n.type,pattern:""===n.pattern?null:n.pattern,autocomplete:n.autocomplete,required:n.required,class:["\n                relative\n                block\n                w-full\n                px-3\n                py-2\n                sm:py-3\n                bg-black bg-opacity-30\n                border-2 border-gray-300\n                placeholder-gray-500\n                text-base text-gray-300\n                rounded-md\n                h-14\n                focus:outline-none focus:ring-yellow-500 focus:border-yellow-500\n            ",{"text-white":n.darkMode,"bg-gray-900":n.darkMode,"border-gray-200":n.darkMode,"bg-opacity-100":n.darkMode}],placeholder:n.placeholder,value:n.modelValue,onInput:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,42,["id","name","type","pattern","autocomplete","required","placeholder","value"])])}n("caad");var a={name:"Input",components:{},props:{modelValue:{type:String,default:""},required:{type:Boolean,default:!1},name:{type:String,required:!0},darkMode:{type:Boolean,default:!1},placeholder:{type:String,default:"Placeholder"},autocomplete:{type:String,default:"off"},pattern:{type:String,default:""},type:{validator:function(e){return["checkbox","hidden","password","radio","text","email","number","tel","datetime-local"].includes(e)},default:"text"}},computed:{},methods:{}};a.render=o;t["a"]=a},2375:function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["G"])("data-v-5ebc378e");Object(r["s"])("data-v-5ebc378e");var a={class:"lds-ring"},l=Object(r["g"])("div",null,null,-1),c=Object(r["g"])("div",null,null,-1),s=Object(r["g"])("div",null,null,-1),d=Object(r["g"])("div",null,null,-1);Object(r["q"])();var u=o((function(e,t,n,o,u,i){return Object(r["p"])(),Object(r["d"])("div",a,[l,c,s,d])})),i={name:"Spinner"};n("31ab");i.render=u,i.__scopeId="data-v-5ebc378e";t["a"]=i},"31ab":function(e,t,n){"use strict";n("9c32")},6196:function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),o={class:"\n                flex flex-col\n                sm:flex-row sm:justify-between\n                md:justify-start md:flex-col\n            "},a=Object(r["g"])("h2",{class:"text-yellow-500 text-4xl font-bold mb-4"},"Откуда",-1),l={class:"flex justify-start flex-col md:flex-row"},c=Object(r["g"])("span",{class:"pl-2 block"},"Населенный пункт",-1),s={class:"relative inline-flex self-center"},d=Object(r["g"])("svg",{class:"\n                                    text-white\n                                    bg-yellow-500\n                                    absolute\n                                    top-0\n                                    right-0\n                                    m-2\n                                    pointer-events-none\n                                    p-2\n                                    h-8\n                                    w-8\n                                    rounded\n                                ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 22",version:"1.1"},[Object(r["g"])("g",{id:"ZahnhelferDE—Design",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Object(r["g"])("g",{id:"ZahnhelferDE–Icon&Asset-Download",transform:"translate(-539.000000, -199.000000)",fill:"#ffffff","fill-rule":"nonzero"},[Object(r["g"])("g",{id:"Icon-/-ArrowRight-Copy-2",transform:"translate(538.000000, 183.521208)"},[Object(r["g"])("polygon",{id:"Path-Copy",transform:"translate(20.000000, 18.384776) rotate(135.000000) translate(-20.000000, -18.384776) ",points:"33 5.38477631 33 31.3847763 29 31.3847763 28.999 9.38379168 7 9.38477631 7 5.38477631"})])])])],-1),u={class:"w-52 md:w-auto"},i=Object(r["g"])("span",{class:"pl-2"},"Улица",-1),b={class:"w-20"},p=Object(r["g"])("span",{class:"pl-2"},"Дом",-1),f={class:"w-20"},m=Object(r["g"])("span",{class:"pl-2"},"Подъезд",-1),g=Object(r["g"])("h2",{class:"text-yellow-500 text-4xl font-bold mb-4"},"Куда",-1),O={class:"flex justify-start flex-col md:flex-row"},j=Object(r["g"])("span",{class:"pl-2 block"},"Населенный пункт",-1),h={class:"relative inline-flex self-center"},w=Object(r["g"])("svg",{class:"\n                                    text-white\n                                    bg-yellow-500\n                                    absolute\n                                    top-0\n                                    right-0\n                                    m-2\n                                    pointer-events-none\n                                    p-2\n                                    h-8\n                                    w-8\n                                    rounded\n                                ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 22",version:"1.1"},[Object(r["g"])("g",{id:"ZahnhelferDE—Design",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Object(r["g"])("g",{id:"ZahnhelferDE–Icon&Asset-Download",transform:"translate(-539.000000, -199.000000)",fill:"#ffffff","fill-rule":"nonzero"},[Object(r["g"])("g",{id:"Icon-/-ArrowRight-Copy-2",transform:"translate(538.000000, 183.521208)"},[Object(r["g"])("polygon",{id:"Path-Copy",transform:"translate(20.000000, 18.384776) rotate(135.000000) translate(-20.000000, -18.384776) ",points:"33 5.38477631 33 31.3847763 29 31.3847763 28.999 9.38379168 7 9.38477631 7 5.38477631"})])])])],-1),v={class:"w-52 md:w-auto"},y=Object(r["g"])("span",{class:"pl-2"},"Улица",-1),x={class:"w-20"},k=Object(r["g"])("span",{class:"pl-2"},"Дом",-1),D={class:"mt-4"},S={class:"w-1/2 md:w-1/4"},I=Object(r["g"])("span",{class:"pl-2"},"Промо код",-1),_={class:"w-1/2 md:w-1/4"},V=Object(r["g"])("span",{class:"pl-2"},"Время",-1),C={type:"submit",class:"\n                    group\n                    relative\n                    w-full\n                    sm:w-1/2\n                    flex\n                    justify-center\n                    py-2\n                    sm:py-3 sm:my-3\n                    my-2\n                    px-4\n                    border border-transparent\n                    text-base\n                    font-medium\n                    rounded-md\n                    text-white\n                    bg-yellow-500\n                    hover:bg-yellow-600\n                    focus:outline-none\n                    focus:ring-2\n                    focus:ring-offset-2\n                    focus:ring-white\n                "},T={class:"flex items-center"},A={key:1},R={key:1,class:"rounded-md bg-gray-900 text-white p-4"},q=Object(r["g"])("div",{class:"text-2xl mb-4"},"Информация о текущем заказе",-1),E=Object(r["g"])("div",{class:"text-yellow-500 text-2xl font-bold mb-4"},"Откуда",-1),M={class:"mb-4"},U=Object(r["g"])("div",{class:"text-yellow-500 text-2xl font-bold mb-4"},"Куда",-1),B={class:"mb-4"},H={class:"mb-4"},z=Object(r["f"])(" Время прибытия такси: "),P={class:"text-yellow-500"},Z={class:"mb-4"},F=Object(r["f"])(" Статус: "),L={class:"text-yellow-500"},N={class:"mb-2"},G=Object(r["f"])(" Цена поездки: "),K={key:0,class:"pl-2"},J=Object(r["g"])("br",null,null,-1),W={key:1,class:"pl-2 text-lg font-bold text-yellow-500"},Y={key:2},$={class:"flex items-center"},Q={key:1};function X(e,t,n,X,ee,te){var ne=Object(r["w"])("Input"),re=Object(r["w"])("Spinner");return Object(r["p"])(),Object(r["d"])(r["a"],null,[null===ee.orderInfo?(Object(r["p"])(),Object(r["d"])("form",{key:0,onSubmit:t[10]||(t[10]=Object(r["F"])((function(){return te.submit&&te.submit.apply(te,arguments)}),["prevent"]))},[Object(r["g"])("div",o,[Object(r["g"])("div",null,[a,Object(r["g"])("div",l,[Object(r["g"])("div",null,[c,Object(r["g"])("div",s,[d,Object(r["E"])(Object(r["g"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return ee.formData.town=e}),class:"\n                                    custom-select\n                                    text-lg\n                                    rounded-md\n                                    border-2\n                                    text-white\n                                    w-60\n                                    h-14\n                                    px-3\n                                    py-2\n                                    sm:py-3\n                                    bg-gray-900\n                                    hover:border-yellow-500\n                                    focus:outline-none\n                                    appearance-none\n                                ",required:""},[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(ee.towns,(function(e,t){return Object(r["p"])(),Object(r["d"])("option",{key:t,value:t},Object(r["y"])(e),9,["value"])})),128))],512),[[r["A"],ee.formData.town]])])]),Object(r["g"])("div",u,[i,Object(r["g"])(ne,{modelValue:ee.formData.street,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ee.formData.street=e}),name:"street",type:"text",required:"",placeholder:"Улица","dark-mode":""},null,8,["modelValue"])]),Object(r["g"])("div",b,[p,Object(r["g"])(ne,{modelValue:ee.formData.house,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ee.formData.house=e}),name:"house",type:"number",required:"",placeholder:"Дом","dark-mode":""},null,8,["modelValue"])]),Object(r["g"])("div",f,[m,Object(r["g"])(ne,{modelValue:ee.formData.entrance,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ee.formData.entrance=e}),name:"entrance",type:"number",required:"",placeholder:"Подъезд","dark-mode":""},null,8,["modelValue"])])])]),Object(r["g"])("div",null,[g,Object(r["g"])("div",O,[Object(r["g"])("div",null,[j,Object(r["g"])("div",h,[w,Object(r["E"])(Object(r["g"])("select",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return ee.formData.destinationTown=e}),class:"\n                                    custom-select\n                                    text-lg\n                                    rounded-md\n                                    border-2\n                                    text-white\n                                    w-60\n                                    h-14\n                                    px-3\n                                    py-2\n                                    sm:py-3\n                                    bg-gray-900\n                                    hover:border-yellow-500\n                                    focus:outline-none\n                                    appearance-none\n                                ",required:""},[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(ee.towns,(function(e,t){return Object(r["p"])(),Object(r["d"])("option",{key:t,value:t},Object(r["y"])(e),9,["value"])})),128))],512),[[r["A"],ee.formData.destinationTown]])])]),Object(r["g"])("div",v,[y,Object(r["g"])(ne,{modelValue:ee.formData.destinationStreet,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ee.formData.destinationStreet=e}),name:"street",type:"text",required:"",placeholder:"Улица","dark-mode":""},null,8,["modelValue"])]),Object(r["g"])("div",x,[k,Object(r["g"])(ne,{modelValue:ee.formData.destinationHouse,"onUpdate:modelValue":t[7]||(t[7]=function(e){return ee.formData.destinationHouse=e}),name:"house",type:"number",required:"",placeholder:"Дом","dark-mode":""},null,8,["modelValue"])])])])]),Object(r["g"])("div",D,[Object(r["g"])("div",S,[I,Object(r["g"])(ne,{modelValue:ee.formData.discount,"onUpdate:modelValue":t[8]||(t[8]=function(e){return ee.formData.discount=e}),name:"promo",type:"text",placeholder:"Промо код","dark-mode":""},null,8,["modelValue"])]),Object(r["g"])("div",_,[V,Object(r["g"])(ne,{modelValue:ee.formData.scheduledTime,"onUpdate:modelValue":t[9]||(t[9]=function(e){return ee.formData.scheduledTime=e}),name:"time",type:"datetime-local","dark-mode":"",required:""},null,8,["modelValue"])])]),Object(r["g"])("div",null,[Object(r["g"])("button",C,[Object(r["g"])("span",T,["loading"===ee.sendOrderStatus?(Object(r["p"])(),Object(r["d"])(re,{key:0})):(Object(r["p"])(),Object(r["d"])("span",A,"Заказать такси"))])])])],32)):Object(r["e"])("",!0),null!==ee.orderInfo?(Object(r["p"])(),Object(r["d"])("div",R,[q,E,Object(r["g"])("div",M,Object(r["y"])(ee.orderInfo.full_client_address),1),U,Object(r["g"])("div",B,Object(r["y"])(ee.orderInfo.full_destination_address),1),Object(r["g"])("div",H,[z,Object(r["g"])("span",P,Object(r["y"])(te.getClearDate(ee.orderInfo.scheduledTime)),1)]),Object(r["g"])("div",null," Автомобиль: "+Object(r["y"])(ee.car_colors[ee.orderInfo.driver_details.car_details.color]+" "+ee.car_brands[ee.orderInfo.driver_details.car_details.brand]),1),Object(r["g"])("div",null," Водитель: "+Object(r["y"])(ee.orderInfo.driver_details.user_details.name),1),Object(r["g"])("div",Z,[F,Object(r["g"])("span",L,Object(r["y"])(ee.order_status[ee.orderInfo.orderStatus]),1)]),Object(r["g"])("div",N,[G,Object(r["g"])("span",{class:["text-lg pl-4",{"line-through":null!==ee.orderInfo.discount_details,"font-bold":null===ee.orderInfo.discount_details}]},Object(r["y"])(ee.orderInfo.price)+" руб",3),null!==ee.orderInfo.discount_details?(Object(r["p"])(),Object(r["d"])("span",K,[J,Object(r["f"])(" Со скидкой в "+Object(r["y"])(ee.orderInfo.discount_details.discountAmount)+"%:",1)])):Object(r["e"])("",!0),null!==ee.orderInfo.discount_details?(Object(r["p"])(),Object(r["d"])("span",W,Object(r["y"])(ee.orderInfo.price-ee.orderInfo.price*(ee.orderInfo.discount_details.discountAmount/100))+" руб",1)):Object(r["e"])("",!0)])])):Object(r["e"])("",!0),null!==ee.orderInfo?(Object(r["p"])(),Object(r["d"])("div",Y,[Object(r["g"])("button",{class:"\n                group\n                relative\n                w-full\n                sm:w-1/2\n                flex\n                justify-center\n                py-2\n                sm:py-3 sm:my-3\n                my-2\n                px-4\n                border border-transparent\n                text-base\n                font-medium\n                rounded-md\n                text-white\n                bg-yellow-500\n                hover:bg-yellow-600\n                focus:outline-none\n                focus:ring-2\n                focus:ring-offset-2\n                focus:ring-white\n            ",onClick:t[11]||(t[11]=function(){return te.closeCurrentOrder&&te.closeCurrentOrder.apply(te,arguments)})},[Object(r["g"])("span",$,["loading"===ee.closeOrderStatus?(Object(r["p"])(),Object(r["d"])(re,{key:0})):(Object(r["p"])(),Object(r["d"])("span",Q,"Отменить заказ"))])])])):Object(r["e"])("",!0)],64)}var ee=n("1da1"),te=n("5530"),ne=(n("96cf"),n("1270")),re=n("2375"),oe=n("66be"),ae=n("5502"),le=n("bc3a"),ce=n.n(le),se=n("14b7"),de=n.n(se),ue={name:"OrderCar",components:{Input:ne["a"],Spinner:re["a"]},data:function(){return{routesList:oe["a"],orderInfo:null,formData:{discount:"",town:"Ramenskoe",street:"",house:"",entrance:"1",destinationTown:"Ramenskoe",destinationStreet:"",destinationHouse:"",scheduledTime:""},towns:{Ramenskoe:"Раменское",Kratovo:"Кратово",Zukovski:"Жуковский",Bronici:"Броницы",Minino:"Минино",Ghel:"Гжель",Kosherovo:"Кошерово",Konyashino:"Коняшино"},order_status:{client_waiting:"Водитель едет",driver_waiting:"Водитель ждет",client_canceled:"Вы отменили заказ",in_progress:"Водитель отвозит вас",completed:"Вы на месте!"},car_colors:{yellow:"желтый",green:"зеленый",red:"красный",black:"черный",white:"белый",blue:"синий"},car_brands:{BMW:"BMW",LADA:"Lada",CHEVROLET:"Chevrolet",HYUNDAI:"Hyundai",MERCEDES:"Mercedes",PEUGEOT:"Peugeot"},showSuccessAlert:!1,sendOrderStatus:"",closeOrderStatus:"",checkCurrentOrderStatus:"loading",error:[]}},computed:Object(te["a"])({},Object(ae["c"])("tokens",["getAccessToken"])),watch:{formData:{handler:function(){this.error.length>0&&(this.error=[])},deep:!0},sendOrderStatus:function(e){var t=this;"success"===e&&(this.showSuccessAlert=!0,setTimeout((function(){return t.showSuccessAlert=!1}),1500))}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkCurrentOrder();case 2:case"end":return t.stop()}}),t)})))()},methods:{checkCredentials:function(){console.log("")},getClearDate:function(e){var t=new Date(e),n=function(e){return e>=10?e:"0"+e};return n(t.getDate())+"/"+n(t.getMonth()+1)+"/"+t.getFullYear()+" "+n(t.getHours())+":"+n(t.getMinutes())},submit:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkCredentials(),0!==e.error.length){t.next=15;break}return t.prev=2,e.sendOrderStatus="loading",n=e.getAccessToken,r=de.a.decode(n).user_id,t.next=8,ce.a.post("/api/create-order",{order:{user_id:r,discount:e.formData.discount,town:e.formData.town,street:e.formData.street,house:e.formData.house,entrance:e.formData.entrance,destinationTown:e.formData.destinationTown,destinationStreet:e.formData.destinationStreet,destinationHouse:e.formData.destinationHouse,scheduledTime:e.formData.scheduledTime}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 8:return t.next=10,e.checkCurrentOrder();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),e.lastNewsStatus="error";case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},checkCurrentOrder:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.checkCurrentOrderStatus="loading",n=e.getAccessToken,t.next=5,ce.a.get("/api/current-order",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 5:r=t.sent,e.checkCurrentOrderStatus="success",null!==r.data.orderStatus&&(e.orderInfo=r.data),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.lastNewsStatus="error";case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},closeCurrentOrder:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.closeOrderStatus="loading",n=e.getAccessToken,t.next=5,ce.a.post("/api/close-order",{id:e.orderInfo.id},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 5:e.clearForm(),e.closeOrderStatus="success",e.orderInfo=null,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.lastNewsStatus="error";case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},clearForm:function(){this.formData={discount:"",town:"Ramenskoe",street:"",house:"",entrance:"1",destinationTown:"Ramenskoe",destinationStreet:"",destinationHouse:"",scheduledTime:""}}}};ue.render=X;t["default"]=ue},"9c32":function(e,t,n){},caad:function(e,t,n){"use strict";var r=n("23e7"),o=n("4d64").includes,a=n("44d2");r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);
//# sourceMappingURL=chunk-32d0272c.dbd39373.js.map