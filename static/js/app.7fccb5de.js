(function(e){function t(t){for(var r,a,u=t[0],s=t[1],i=t[2],f=0,h=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&h.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(h.length)h.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==c[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},c={app:0},o=[];function u(e){return s.p+"static/js/"+({}[e]||e)+"."+{"chunk-123c6bf8":"a7b40519","chunk-2d0d79a0":"1f6f4e1e","chunk-32d0272c":"dbd39373","chunk-3aca3bc9":"efea0cae","chunk-3e211dc6":"3516a3ed","chunk-4310d03a":"8b232b54","chunk-5a130660":"b2832c25","chunk-5c13b7b5":"60e0d8d8","chunk-9603ca20":"800f4cbb","chunk-a5b34e7c":"7d104c85","chunk-dd30d0fa":"2b433b0c","chunk-ddf2292c":"9b942434"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-123c6bf8":1,"chunk-32d0272c":1,"chunk-3aca3bc9":1,"chunk-3e211dc6":1,"chunk-4310d03a":1,"chunk-5a130660":1,"chunk-5c13b7b5":1,"chunk-9603ca20":1,"chunk-a5b34e7c":1,"chunk-dd30d0fa":1,"chunk-ddf2292c":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="static/css/"+({}[e]||e)+"."+{"chunk-123c6bf8":"9b7e31db","chunk-2d0d79a0":"31d6cfe0","chunk-32d0272c":"308842ed","chunk-3aca3bc9":"308842ed","chunk-3e211dc6":"3f797c66","chunk-4310d03a":"8321a418","chunk-5a130660":"5dba2045","chunk-5c13b7b5":"3f797c66","chunk-9603ca20":"308842ed","chunk-a5b34e7c":"58837e82","chunk-dd30d0fa":"8f51b6cf","chunk-ddf2292c":"308842ed"}[e]+".css",c=s.p+r,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var i=o[u],f=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(f===r||f===c))return t()}var h=document.getElementsByTagName("style");for(u=0;u<h.length;u++){i=h[u],f=i.getAttribute("data-href");if(f===r||f===c)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||c,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],d.parentNode.removeChild(d),n(o)},d.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=c[e]=[t,n]}));t.push(r[2]=o);var i,f=document.createElement("script");f.charset="utf-8",f.timeout=120,s.nc&&f.setAttribute("nonce",s.nc),f.src=u(e);var h=new Error;i=function(t){f.onerror=f.onload=null,clearTimeout(d);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",h.name="ChunkLoadError",h.type=r,h.request=a,n[1](h)}c[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:f})}),12e4);f.onerror=f.onload=i,document.head.appendChild(f)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],f=i.push.bind(i);i.push=t,i=i.slice();for(var h=0;h<i.length;h++)t(i[h]);var d=f;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},2:function(e,t){},"255e":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return s}));var r="PROFILE_REQUEST_FETCHING",a="PROFILE_REQUEST_SUCCESS",c="PROFILE_REQUEST_ERROR",o="PROFILE_UPDATE",u="PROFILE_UPDATE_SUCCESS",s="PROFILE_UPDATE_ERROR"},"2edd":function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"l",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return l}));var r="AUTH_REQUEST",a="AUTH_REFRESH_REQUEST",c="QUIET_REFRESH_REQUEST",o="AUTH_REFRESH_SUCCESS",u="AUTH_SUCCESS",s="AUTH_ERROR",i="AUTH_LOGOUT",f="AUTH_REFRESH_ERROR",h="FIRST_AUTH_REQUEST_SUCCESS",d="CREATE_USER_REQUEST",p="CREATE_USER_SUCCESS",l="CREATE_USER_ERROR"},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a,c,o,u=n("7a23"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),i=n("66be"),f=n("5502"),h={profileStatus:"loading",profileUpdateStatus:"",profileInfo:null},d=h,p=n("ade3"),l=n("5530"),b=n("255e"),k=(r={},Object(p["a"])(r,b["b"],(function(e){e.profileStatus="loading"})),Object(p["a"])(r,b["c"],(function(e,t){var n=t.newProfileInfo;e.profileStatus="success",e.profileInfo=Object(l["a"])({},n)})),Object(p["a"])(r,b["a"],(function(e){e.profileStatus="error"})),Object(p["a"])(r,b["d"],(function(e){e.profileUpdateStatus="loading"})),Object(p["a"])(r,b["f"],(function(e,t){var n=t.newProfileInfo;e.profileUpdateStatus="success",e.profileInfo=Object(l["a"])({},n)})),Object(p["a"])(r,b["e"],(function(e){e.profileUpdateStatus="error"})),r),g=k,m=n("1da1"),v=(n("b0c0"),n("96cf"),n("bc3a")),S=n.n(v),T=n("14b7"),O=n.n(T),w=(a={},Object(p["a"])(a,b["b"],function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,r=t.rootState,e.prev=1,a=r.tokens.accessToken,null!==a){e.next=5;break}return e.abrupt("return",n(b["a"],{}));case 5:return c=O.a.decode(a).user_id,n(b["b"]),e.next=9,S.a.get("/api/users/".concat(c),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 9:o=e.sent,n(b["c"],{newProfileInfo:o.data}),e.next=17;break;case 13:throw e.prev=13,e.t0=e["catch"](1),n(b["a"],e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()),Object(p["a"])(a,b["d"],function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,c,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=t.rootState,e.prev=1,c=a.tokens.accessToken,null!==c){e.next=5;break}return e.abrupt("return",r(b["a"],{}));case 5:return o=O.a.decode(c).user_id,r(b["d"]),e.next=9,S.a.patch("/api/users/".concat(o,"/"),{phone:n.phone,name:n.name,surname:n.surname},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 9:u=e.sent,console.log(u.data),r(b["f"],{newProfileInfo:u.data}),e.next=18;break;case 14:throw e.prev=14,e.t0=e["catch"](1),r(b["e"],e.t0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()),a),E=w,R={profileStatus:function(e){return e.profileStatus},profileUpdateStatus:function(e){return e.profileUpdateStatus},profileInfo:function(e){return e.profileInfo}},P=R,j={namespaced:!0,state:d,mutations:g,getters:P,actions:E},_={accessToken:null,refreshToken:localStorage.getItem("refresh_token")||null,tokenStatus:"",firstRequestSuccess:!1,creatingUserStatus:null},U=_,y=n("2edd"),C=(c={},Object(p["a"])(c,y["f"],(function(e){e.tokenStatus="loading"})),Object(p["a"])(c,y["i"],(function(e){e.creatingUserStatus="loading"})),Object(p["a"])(c,y["j"],(function(e){e.creatingUserStatus="success"})),Object(p["a"])(c,y["h"],(function(e){e.creatingUserStatus="error"})),Object(p["a"])(c,y["k"],(function(e){e.firstRequestSuccess=!0})),Object(p["a"])(c,y["d"],(function(e){e.tokenStatus="refreshing"})),Object(p["a"])(c,y["g"],(function(e,t){var n=t.accessToken,r=t.refreshToken;e.tokenStatus="success",e.accessToken=n,e.refreshToken=r})),Object(p["a"])(c,y["e"],(function(e,t){var n=t.accessToken;e.tokenStatus="success",e.accessToken=n})),Object(p["a"])(c,y["l"],(function(e,t){var n=t.accessToken;e.accessToken=n})),Object(p["a"])(c,y["a"],(function(e){e.tokenStatus="error"})),Object(p["a"])(c,y["c"],(function(e){e.tokenStatus="error",e.accessToken=null,e.refreshToken=null,e.firstRequestSuccess=!1})),Object(p["a"])(c,y["b"],(function(e){e.tokenStatus="",e.accessToken=null,e.refreshToken=null,e.firstRequestSuccess=!1})),c),x=C,I=(o={},Object(p["a"])(o,y["i"],function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,r(y["i"]),e.next=5,S.a.post("/api/create-user",{user:{email:n.email,name:n.name,surname:n.surname,password:n.password}},{headers:{"Content-Type":"application/json"}});case 5:a=e.sent,console.log(a.data),r("profile/".concat(b["c"]),{newProfileInfo:a.data.user},{root:!0}),r(y["g"],{accessToken:a.data.tokens.access,refreshToken:a.data.tokens.refresh}),r(y["j"]),localStorage.setItem("refresh_token",a.data.tokens.refresh),e.next=17;break;case 13:throw e.prev=13,e.t0=e["catch"](1),r(y["h"],e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(p["a"])(o,y["f"],function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,r(y["f"]),e.next=5,S.a.post("/api/login",{user:{email:n.email,password:n.password}},{headers:{"Content-Type":"application/json"}});case 5:a=e.sent,console.log(a.data),r("profile/".concat(b["c"]),{newProfileInfo:a.data.user},{root:!0}),r(y["g"],{accessToken:a.data.tokens.access,refreshToken:a.data.tokens.refresh}),r(y["k"]),localStorage.setItem("refresh_token",a.data.tokens.refresh),e.next=17;break;case 13:throw e.prev=13,e.t0=e["catch"](1),r(y["a"],e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(p["a"])(o,y["d"],function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.prev=1,n(y["d"]),e.next=5,S.a.post("/api/refresh-token",{refresh:r.refreshToken},{headers:{"Content-Type":"application/json"}});case 5:a=e.sent,n(y["e"],{accessToken:a.data.access}),r.firstRequestSuccess||n(y["k"]),e.next=15;break;case 10:throw e.prev=10,e.t0=e["catch"](1),n(y["c"]),localStorage.removeItem("refresh_token"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),Object(p["a"])(o,y["l"],function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.prev=1,e.next=4,S.a.post("/api/refresh-token",{refresh:r.refreshToken},{headers:{"Content-Type":"application/json"}});case 4:a=e.sent,n(y["l"],{accessToken:a.data.access}),e.next=13;break;case 8:throw e.prev=8,e.t0=e["catch"](1),n(y["c"]),localStorage.removeItem("refresh_token"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),Object(p["a"])(o,y["b"],function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.prev=1,e.next=4,S.a.post("/api/logout",{refresh_token:r.refreshToken},{headers:{"Content-Type":"application/json"}});case 4:n(y["b"]),localStorage.removeItem("refresh_token"),e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](1),n(y["a"]),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),o),A=I,L={isAuthenticated:function(e){return null!==e.refreshToken},creatingUserStatus:function(e){return e.creatingUserStatus},getAccessToken:function(e){return e.accessToken},tokenStatus:function(e){return e.tokenStatus},firstRequestSuccess:function(e){return e.firstRequestSuccess}},q=L,H={namespaced:!0,state:U,mutations:x,getters:q,actions:A},F=new f["a"].Store({modules:{profile:j,tokens:H}}),B=[{path:i["a"].mainPage.path,component:function(){return n.e("chunk-dd30d0fa").then(n.bind(null,"cd56"))},children:[{path:i["a"].mainPage.path,component:function(){return n.e("chunk-5a130660").then(n.bind(null,"e6dc"))}},{path:i["a"].mainPage.children.profilePage.path,component:function(){return n.e("chunk-ddf2292c").then(n.bind(null,"d922"))},meta:{requiresAuthentication:!0},children:[{path:i["a"].mainPage.children.profilePage.children.editUser.path,component:function(){return n.e("chunk-3aca3bc9").then(n.bind(null,"1b4c"))}},{path:i["a"].mainPage.children.profilePage.children.orderCar.path,component:function(){return n.e("chunk-32d0272c").then(n.bind(null,"6196"))}}]},{path:i["a"].mainPage.children.pricesPage.path,component:function(){return n.e("chunk-4310d03a").then(n.bind(null,"7315"))}},{path:i["a"].mainPage.children.driversPage.path,component:function(){return n.e("chunk-9603ca20").then(n.bind(null,"5e65"))}},{path:i["a"].mainPage.children.newsPage.path,component:function(){return n.e("chunk-123c6bf8").then(n.bind(null,"7a7e"))}},{path:i["a"].mainPage.children.newsPage.children.openedNews.path,component:function(){return n.e("chunk-123c6bf8").then(n.bind(null,"7a7e"))},props:!0}]},{path:i["a"].authPage.path,component:function(){return n.e("chunk-a5b34e7c").then(n.bind(null,"2fef"))},children:[{path:i["a"].authPage.children.signInPage.path,component:function(){return n.e("chunk-3e211dc6").then(n.bind(null,"c790"))},meta:{requiresToBeLoggedOut:!0}},{path:i["a"].authPage.children.forgotPasswordPage.path,component:function(){return n.e("chunk-2d0d79a0").then(n.bind(null,"7809"))},meta:{requiresToBeLoggedOut:!0}},{path:i["a"].authPage.children.signUpPage.path,component:function(){return n.e("chunk-5c13b7b5").then(n.bind(null,"ccac"))},meta:{requiresToBeLoggedOut:!0}}]}],Q=Object(s["b"])("/"),N=Object(s["a"])({routes:B,history:Q});N.beforeEach((function(e,t,n){e.meta.requiresToBeLoggedOut?F.getters["tokens/isAuthenticated"]?n(i["a"].mainPage.path):n():e.meta.requiresAuthentication?F.getters["tokens/isAuthenticated"]?n():n(i["a"].authPage.children.signInPage.path):n()}));var D=N;function M(e,t,n,r,a,c){var o=Object(u["w"])("router-view");return Object(u["p"])(),Object(u["d"])(o)}var z={name:"App",components:{}};z.render=M;var G=z,J=(n("a766"),Object(u["c"])(G));J.use(D),J.use(F),J.mount("#app")},6:function(e,t){},"66be":function(e,t,n){"use strict";var r={mainPage:{path:"/",header:"Главная",children:{newsPage:{path:"/news",children:{openedNews:{path:"/news/:id"}}},pricesPage:{path:"/prices"},driversPage:{path:"/drivers"},profilePage:{path:"/profile",header:"Профиль",children:{editUser:{path:"/profile"},orderCar:{path:"/profile/order-car"}}}}},authPage:{path:"/auth",header:"Авторизация",children:{signInPage:{path:"/auth/sign-in"},forgotPasswordPage:{path:"/auth/forgot-password"},signUpPage:{path:"/auth/sign-up"}}}};t["a"]=r},7:function(e,t){},8:function(e,t){},9:function(e,t){},a766:function(e,t,n){}});
//# sourceMappingURL=app.7fccb5de.js.map