(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32d0272c"],{1270:function(e,t,r){"use strict";r("b0c0");var n=r("7a23");function o(e,t,r,o,a,l){return Object(n["p"])(),Object(n["d"])("div",null,[Object(n["g"])("label",{for:r.name,class:"sr-only"},Object(n["y"])(r.name),9,["for"]),Object(n["g"])("input",{id:r.name,name:r.name,type:r.type,pattern:""===r.pattern?null:r.pattern,autocomplete:r.autocomplete,required:r.required,class:["\r\n                relative\r\n                block\r\n                w-full\r\n                px-3\r\n                py-2\r\n                sm:py-3\r\n                bg-black bg-opacity-30\r\n                border-2 border-gray-300\r\n                placeholder-gray-500\r\n                text-base text-gray-300\r\n                rounded-md\r\n                h-14\r\n                focus:outline-none focus:ring-yellow-500 focus:border-yellow-500\r\n            ",{"text-white":r.darkMode,"bg-gray-900":r.darkMode,"border-gray-200":r.darkMode,"bg-opacity-100":r.darkMode}],placeholder:r.placeholder,value:r.modelValue,onInput:t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t.target.value)})},null,42,["id","name","type","pattern","autocomplete","required","placeholder","value"])])}r("caad");var a={name:"Input",components:{},props:{modelValue:{type:String,default:""},required:{type:Boolean,default:!1},name:{type:String,required:!0},darkMode:{type:Boolean,default:!1},placeholder:{type:String,default:"Placeholder"},autocomplete:{type:String,default:"off"},pattern:{type:String,default:""},type:{validator:function(e){return["checkbox","hidden","password","radio","text","email","number","tel","datetime-local"].includes(e)},default:"text"}},computed:{},methods:{}};a.render=o;t["a"]=a},2375:function(e,t,r){"use strict";var n=r("7a23"),o=Object(n["G"])("data-v-5ebc378e");Object(n["s"])("data-v-5ebc378e");var a={class:"lds-ring"},l=Object(n["g"])("div",null,null,-1),c=Object(n["g"])("div",null,null,-1),s=Object(n["g"])("div",null,null,-1),d=Object(n["g"])("div",null,null,-1);Object(n["q"])();var u=o((function(e,t,r,o,u,i){return Object(n["p"])(),Object(n["d"])("div",a,[l,c,s,d])})),i={name:"Spinner"};r("31ab");i.render=u,i.__scopeId="data-v-5ebc378e";t["a"]=i},"31ab":function(e,t,r){"use strict";r("9c32")},6196:function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),o={class:"\r\n                flex flex-col\r\n                sm:flex-row sm:justify-between\r\n                md:justify-start md:flex-col\r\n            "},a=Object(n["g"])("h2",{class:"text-yellow-500 text-4xl font-bold mb-4"},"Откуда",-1),l={class:"flex justify-start flex-col md:flex-row"},c=Object(n["g"])("span",{class:"pl-2 block"},"Населенный пункт",-1),s={class:"relative inline-flex self-center"},d=Object(n["g"])("svg",{class:"\r\n                                    text-white\r\n                                    bg-yellow-500\r\n                                    absolute\r\n                                    top-0\r\n                                    right-0\r\n                                    m-2\r\n                                    pointer-events-none\r\n                                    p-2\r\n                                    h-8\r\n                                    w-8\r\n                                    rounded\r\n                                ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 22",version:"1.1"},[Object(n["g"])("g",{id:"ZahnhelferDE—Design",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Object(n["g"])("g",{id:"ZahnhelferDE–Icon&Asset-Download",transform:"translate(-539.000000, -199.000000)",fill:"#ffffff","fill-rule":"nonzero"},[Object(n["g"])("g",{id:"Icon-/-ArrowRight-Copy-2",transform:"translate(538.000000, 183.521208)"},[Object(n["g"])("polygon",{id:"Path-Copy",transform:"translate(20.000000, 18.384776) rotate(135.000000) translate(-20.000000, -18.384776) ",points:"33 5.38477631 33 31.3847763 29 31.3847763 28.999 9.38379168 7 9.38477631 7 5.38477631"})])])])],-1),u={class:"w-52 md:w-auto"},i=Object(n["g"])("span",{class:"pl-2"},"Улица",-1),b={class:"w-20"},p=Object(n["g"])("span",{class:"pl-2"},"Дом",-1),f={class:"w-20"},m=Object(n["g"])("span",{class:"pl-2"},"Подъезд",-1),g=Object(n["g"])("h2",{class:"text-yellow-500 text-4xl font-bold mb-4"},"Куда",-1),O={class:"flex justify-start flex-col md:flex-row"},j=Object(n["g"])("span",{class:"pl-2 block"},"Населенный пункт",-1),h={class:"relative inline-flex self-center"},w=Object(n["g"])("svg",{class:"\r\n                                    text-white\r\n                                    bg-yellow-500\r\n                                    absolute\r\n                                    top-0\r\n                                    right-0\r\n                                    m-2\r\n                                    pointer-events-none\r\n                                    p-2\r\n                                    h-8\r\n                                    w-8\r\n                                    rounded\r\n                                ",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 22",version:"1.1"},[Object(n["g"])("g",{id:"ZahnhelferDE—Design",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Object(n["g"])("g",{id:"ZahnhelferDE–Icon&Asset-Download",transform:"translate(-539.000000, -199.000000)",fill:"#ffffff","fill-rule":"nonzero"},[Object(n["g"])("g",{id:"Icon-/-ArrowRight-Copy-2",transform:"translate(538.000000, 183.521208)"},[Object(n["g"])("polygon",{id:"Path-Copy",transform:"translate(20.000000, 18.384776) rotate(135.000000) translate(-20.000000, -18.384776) ",points:"33 5.38477631 33 31.3847763 29 31.3847763 28.999 9.38379168 7 9.38477631 7 5.38477631"})])])])],-1),v={class:"w-52 md:w-auto"},y=Object(n["g"])("span",{class:"pl-2"},"Улица",-1),x={class:"w-20"},k=Object(n["g"])("span",{class:"pl-2"},"Дом",-1),D={class:"mt-4"},S={class:"w-1/2 md:w-1/4"},I=Object(n["g"])("span",{class:"pl-2"},"Промо код",-1),_={class:"w-1/2 md:w-1/4"},V=Object(n["g"])("span",{class:"pl-2"},"Время",-1),C={type:"submit",class:"\r\n                    group\r\n                    relative\r\n                    w-full\r\n                    sm:w-1/2\r\n                    flex\r\n                    justify-center\r\n                    py-2\r\n                    sm:py-3 sm:my-3\r\n                    my-2\r\n                    px-4\r\n                    border border-transparent\r\n                    text-base\r\n                    font-medium\r\n                    rounded-md\r\n                    text-white\r\n                    bg-yellow-500\r\n                    hover:bg-yellow-600\r\n                    focus:outline-none\r\n                    focus:ring-2\r\n                    focus:ring-offset-2\r\n                    focus:ring-white\r\n                "},T={class:"flex items-center"},A={key:1},R={key:1,class:"rounded-md bg-gray-900 text-white p-4"},q=Object(n["g"])("div",{class:"text-2xl mb-4"},"Информация о текущем заказе",-1),E=Object(n["g"])("div",{class:"text-yellow-500 text-2xl font-bold mb-4"},"Откуда",-1),M={class:"mb-4"},U=Object(n["g"])("div",{class:"text-yellow-500 text-2xl font-bold mb-4"},"Куда",-1),B={class:"mb-4"},H={class:"mb-4"},z=Object(n["f"])(" Время прибытия такси: "),P={class:"text-yellow-500"},Z={class:"mb-4"},F=Object(n["f"])(" Статус: "),L={class:"text-yellow-500"},N={class:"mb-2"},G=Object(n["f"])(" Цена поездки: "),K={key:0,class:"pl-2"},J=Object(n["g"])("br",null,null,-1),W={key:1,class:"pl-2 text-lg font-bold text-yellow-500"},Y={key:2},$={class:"flex items-center"},Q={key:1};function X(e,t,r,X,ee,te){var re=Object(n["w"])("Input"),ne=Object(n["w"])("Spinner");return Object(n["p"])(),Object(n["d"])(n["a"],null,[null===ee.orderInfo?(Object(n["p"])(),Object(n["d"])("form",{key:0,onSubmit:t[10]||(t[10]=Object(n["F"])((function(){return te.submit&&te.submit.apply(te,arguments)}),["prevent"]))},[Object(n["g"])("div",o,[Object(n["g"])("div",null,[a,Object(n["g"])("div",l,[Object(n["g"])("div",null,[c,Object(n["g"])("div",s,[d,Object(n["E"])(Object(n["g"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return ee.formData.town=e}),class:"\r\n                                    custom-select\r\n                                    text-lg\r\n                                    rounded-md\r\n                                    border-2\r\n                                    text-white\r\n                                    w-60\r\n                                    h-14\r\n                                    px-3\r\n                                    py-2\r\n                                    sm:py-3\r\n                                    bg-gray-900\r\n                                    hover:border-yellow-500\r\n                                    focus:outline-none\r\n                                    appearance-none\r\n                                ",required:""},[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(ee.towns,(function(e,t){return Object(n["p"])(),Object(n["d"])("option",{key:t,value:t},Object(n["y"])(e),9,["value"])})),128))],512),[[n["A"],ee.formData.town]])])]),Object(n["g"])("div",u,[i,Object(n["g"])(re,{modelValue:ee.formData.street,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ee.formData.street=e}),name:"street",type:"text",required:"",placeholder:"Улица","dark-mode":""},null,8,["modelValue"])]),Object(n["g"])("div",b,[p,Object(n["g"])(re,{modelValue:ee.formData.house,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ee.formData.house=e}),name:"house",type:"number",required:"",placeholder:"Дом","dark-mode":""},null,8,["modelValue"])]),Object(n["g"])("div",f,[m,Object(n["g"])(re,{modelValue:ee.formData.entrance,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ee.formData.entrance=e}),name:"entrance",type:"number",required:"",placeholder:"Подъезд","dark-mode":""},null,8,["modelValue"])])])]),Object(n["g"])("div",null,[g,Object(n["g"])("div",O,[Object(n["g"])("div",null,[j,Object(n["g"])("div",h,[w,Object(n["E"])(Object(n["g"])("select",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return ee.formData.destinationTown=e}),class:"\r\n                                    custom-select\r\n                                    text-lg\r\n                                    rounded-md\r\n                                    border-2\r\n                                    text-white\r\n                                    w-60\r\n                                    h-14\r\n                                    px-3\r\n                                    py-2\r\n                                    sm:py-3\r\n                                    bg-gray-900\r\n                                    hover:border-yellow-500\r\n                                    focus:outline-none\r\n                                    appearance-none\r\n                                ",required:""},[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(ee.towns,(function(e,t){return Object(n["p"])(),Object(n["d"])("option",{key:t,value:t},Object(n["y"])(e),9,["value"])})),128))],512),[[n["A"],ee.formData.destinationTown]])])]),Object(n["g"])("div",v,[y,Object(n["g"])(re,{modelValue:ee.formData.destinationStreet,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ee.formData.destinationStreet=e}),name:"street",type:"text",required:"",placeholder:"Улица","dark-mode":""},null,8,["modelValue"])]),Object(n["g"])("div",x,[k,Object(n["g"])(re,{modelValue:ee.formData.destinationHouse,"onUpdate:modelValue":t[7]||(t[7]=function(e){return ee.formData.destinationHouse=e}),name:"house",type:"number",required:"",placeholder:"Дом","dark-mode":""},null,8,["modelValue"])])])])]),Object(n["g"])("div",D,[Object(n["g"])("div",S,[I,Object(n["g"])(re,{modelValue:ee.formData.discount,"onUpdate:modelValue":t[8]||(t[8]=function(e){return ee.formData.discount=e}),name:"promo",type:"text",placeholder:"Промо код","dark-mode":""},null,8,["modelValue"])]),Object(n["g"])("div",_,[V,Object(n["g"])(re,{modelValue:ee.formData.scheduledTime,"onUpdate:modelValue":t[9]||(t[9]=function(e){return ee.formData.scheduledTime=e}),name:"time",type:"datetime-local","dark-mode":"",required:""},null,8,["modelValue"])])]),Object(n["g"])("div",null,[Object(n["g"])("button",C,[Object(n["g"])("span",T,["loading"===ee.sendOrderStatus?(Object(n["p"])(),Object(n["d"])(ne,{key:0})):(Object(n["p"])(),Object(n["d"])("span",A,"Заказать такси"))])])])],32)):Object(n["e"])("",!0),null!==ee.orderInfo?(Object(n["p"])(),Object(n["d"])("div",R,[q,E,Object(n["g"])("div",M,Object(n["y"])(ee.orderInfo.full_client_address),1),U,Object(n["g"])("div",B,Object(n["y"])(ee.orderInfo.full_destination_address),1),Object(n["g"])("div",H,[z,Object(n["g"])("span",P,Object(n["y"])(te.getClearDate(ee.orderInfo.scheduledTime)),1)]),Object(n["g"])("div",null," Автомобиль: "+Object(n["y"])(ee.car_colors[ee.orderInfo.driver_details.car_details.color]+" "+ee.car_brands[ee.orderInfo.driver_details.car_details.brand]),1),Object(n["g"])("div",null," Водитель: "+Object(n["y"])(ee.orderInfo.driver_details.user_details.name),1),Object(n["g"])("div",Z,[F,Object(n["g"])("span",L,Object(n["y"])(ee.order_status[ee.orderInfo.orderStatus]),1)]),Object(n["g"])("div",N,[G,Object(n["g"])("span",{class:["text-lg pl-4",{"line-through":null!==ee.orderInfo.discount_details,"font-bold":null===ee.orderInfo.discount_details}]},Object(n["y"])(ee.orderInfo.price)+" руб",3),null!==ee.orderInfo.discount_details?(Object(n["p"])(),Object(n["d"])("span",K,[J,Object(n["f"])(" Со скидкой в "+Object(n["y"])(ee.orderInfo.discount_details.discountAmount)+"%:",1)])):Object(n["e"])("",!0),null!==ee.orderInfo.discount_details?(Object(n["p"])(),Object(n["d"])("span",W,Object(n["y"])(ee.orderInfo.price-ee.orderInfo.price*(ee.orderInfo.discount_details.discountAmount/100))+" руб",1)):Object(n["e"])("",!0)])])):Object(n["e"])("",!0),null!==ee.orderInfo?(Object(n["p"])(),Object(n["d"])("div",Y,[Object(n["g"])("button",{class:"\r\n                group\r\n                relative\r\n                w-full\r\n                sm:w-1/2\r\n                flex\r\n                justify-center\r\n                py-2\r\n                sm:py-3 sm:my-3\r\n                my-2\r\n                px-4\r\n                border border-transparent\r\n                text-base\r\n                font-medium\r\n                rounded-md\r\n                text-white\r\n                bg-yellow-500\r\n                hover:bg-yellow-600\r\n                focus:outline-none\r\n                focus:ring-2\r\n                focus:ring-offset-2\r\n                focus:ring-white\r\n            ",onClick:t[11]||(t[11]=function(){return te.closeCurrentOrder&&te.closeCurrentOrder.apply(te,arguments)})},[Object(n["g"])("span",$,["loading"===ee.closeOrderStatus?(Object(n["p"])(),Object(n["d"])(ne,{key:0})):(Object(n["p"])(),Object(n["d"])("span",Q,"Отменить заказ"))])])])):Object(n["e"])("",!0)],64)}var ee=r("1da1"),te=r("5530"),re=(r("96cf"),r("1270")),ne=r("2375"),oe=r("66be"),ae=r("5502"),le=r("bc3a"),ce=r.n(le),se=r("14b7"),de=r.n(se),ue={name:"OrderCar",components:{Input:re["a"],Spinner:ne["a"]},data:function(){return{routesList:oe["a"],orderInfo:null,formData:{discount:"",town:"Ramenskoe",street:"",house:"",entrance:"1",destinationTown:"Ramenskoe",destinationStreet:"",destinationHouse:"",scheduledTime:""},towns:{Ramenskoe:"Раменское",Kratovo:"Кратово",Zukovski:"Жуковский",Bronici:"Броницы",Minino:"Минино",Ghel:"Гжель",Kosherovo:"Кошерово",Konyashino:"Коняшино"},order_status:{client_waiting:"Водитель едет",driver_waiting:"Водитель ждет",client_canceled:"Вы отменили заказ",in_progress:"Водитель отвозит вас",completed:"Вы на месте!"},car_colors:{yellow:"желтый",green:"зеленый",red:"красный",black:"черный",white:"белый",blue:"синий"},car_brands:{BMW:"BMW",LADA:"Lada",CHEVROLET:"Chevrolet",HYUNDAI:"Hyundai",MERCEDES:"Mercedes",PEUGEOT:"Peugeot"},showSuccessAlert:!1,sendOrderStatus:"",closeOrderStatus:"",checkCurrentOrderStatus:"loading",error:[]}},computed:Object(te["a"])({},Object(ae["c"])("tokens",["getAccessToken"])),watch:{formData:{handler:function(){this.error.length>0&&(this.error=[])},deep:!0},sendOrderStatus:function(e){var t=this;"success"===e&&(this.showSuccessAlert=!0,setTimeout((function(){return t.showSuccessAlert=!1}),1500))}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkCurrentOrder();case 2:case"end":return t.stop()}}),t)})))()},methods:{checkCredentials:function(){console.log("")},getClearDate:function(e){var t=new Date(e),r=function(e){return e>=10?e:"0"+e};return r(t.getDate())+"/"+r(t.getMonth()+1)+"/"+t.getFullYear()+" "+r(t.getHours())+":"+r(t.getMinutes())},submit:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkCredentials(),0!==e.error.length){t.next=15;break}return t.prev=2,e.sendOrderStatus="loading",r=e.getAccessToken,n=de.a.decode(r).user_id,t.next=8,ce.a.post("/api/create-order",{order:{user_id:n,discount:e.formData.discount,town:e.formData.town,street:e.formData.street,house:e.formData.house,entrance:e.formData.entrance,destinationTown:e.formData.destinationTown,destinationStreet:e.formData.destinationStreet,destinationHouse:e.formData.destinationHouse,scheduledTime:e.formData.scheduledTime}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 8:return t.next=10,e.checkCurrentOrder();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),e.lastNewsStatus="error";case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},checkCurrentOrder:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.checkCurrentOrderStatus="loading",r=e.getAccessToken,t.next=5,ce.a.get("/api/current-order",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 5:n=t.sent,e.checkCurrentOrderStatus="success",null!==n.data.orderStatus&&(e.orderInfo=n.data),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.lastNewsStatus="error";case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},closeCurrentOrder:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.closeOrderStatus="loading",r=e.getAccessToken,t.next=5,ce.a.post("/api/close-order",{id:e.orderInfo.id},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 5:e.clearForm(),e.closeOrderStatus="success",e.orderInfo=null,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.lastNewsStatus="error";case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},clearForm:function(){this.formData={discount:"",town:"Ramenskoe",street:"",house:"",entrance:"1",destinationTown:"Ramenskoe",destinationStreet:"",destinationHouse:"",scheduledTime:""}}}};ue.render=X;t["default"]=ue},"9c32":function(e,t,r){},caad:function(e,t,r){"use strict";var n=r("23e7"),o=r("4d64").includes,a=r("44d2");n({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);
//# sourceMappingURL=chunk-32d0272c.4bb78257.js.map